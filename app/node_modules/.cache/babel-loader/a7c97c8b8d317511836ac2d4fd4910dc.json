{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\robson\\\\Desktop\\\\drip\\\\server-data\\\\resources\\\\[drip]\\\\drip_bank\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\robson\\\\Desktop\\\\drip\\\\server-data\\\\resources\\\\[drip]\\\\drip_bank\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"C:\\\\Users\\\\robson\\\\Desktop\\\\drip\\\\server-data\\\\resources\\\\[drip]\\\\drip_bank\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import React from'react';import{Typography}from'@material-ui/core';import NumberFormat from'react-number-format';import{useRecoilState}from'recoil';import*as atoms from'../../navigation/atoms';import SubmitButtonWithSelector from'../../components/SubmitButtonWithSelector';var styles={container:{width:'100%',height:'40vh',display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column'},buttonContainer:{width:'100%',display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column',boxSizing:'border-box',padding:'1vh'},icon:{width:'3vh',height:'3vh'},withDescription:{display:'flex',alignItems:'flex-start',justifyContent:'flex-start',flexDirection:'column'},wrapper:{marginTop:'1vh',width:'30vw'}};function NumberFormatCustom(props){var inputRef=props.inputRef,onChange=props.onChange,other=_objectWithoutProperties(props,[\"inputRef\",\"onChange\"]);return React.createElement(NumberFormat,Object.assign({},other,{getInputRef:inputRef,onValueChange:function onValueChange(values){onChange({target:{name:props.name,value:values.value}});},thousandSeparator:true,isNumericString:true,prefix:\"$\"}));}var BillsScreen=function BillsScreen(){var _useRecoilState=useRecoilState(atoms.navigationAtom),_useRecoilState2=_slicedToArray(_useRecoilState,2),data=_useRecoilState2[0],setAccount=_useRecoilState2[1];var isDisabled=data.account.bankMoney<data.account.bills;var handleDeposit=function handleDeposit(){fetch(\"http://drip_bank/PayBills\",{method:'POST',body:JSON.stringify({amount:data.account.bills})});setAccount(function(prevState){return _objectSpread({},prevState,{account:_objectSpread({},prevState.account,{},{bills:0,bankMoney:data.account.bankMoney-data.account.bills}),isAsyncRequesting:true});});};return React.createElement(\"div\",{style:styles.container},React.createElement(\"div\",{style:styles.buttonContainer},React.createElement(\"div\",{style:styles.withDescription},React.createElement(Typography,{variant:\"subtitle2\",component:\"div\"},\"Deseja mesmo pagar suas multas?\"),React.createElement(\"div\",{style:styles.withDescription},React.createElement(Typography,{variant:\"body2\",component:\"div\"},\"Todas as multas pendentes somam\"),React.createElement(Typography,{variant:\"subtitle1\",component:\"div\"},new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(data.account.bills))))),React.createElement(\"div\",{style:styles.wrapper},React.createElement(SubmitButtonWithSelector,{label:\"Pagar \\u279D\",isDisabled:isDisabled,isAsyncRequesting:data.isAsyncRequesting,onClick:handleDeposit,fullWidth:true})));};export default BillsScreen;","map":{"version":3,"sources":["C:/Users/robson/Desktop/drip/server-data/resources/[drip]/drip_bank/src/screens/Bills/index.tsx"],"names":["React","Typography","NumberFormat","useRecoilState","atoms","SubmitButtonWithSelector","styles","container","width","height","display","alignItems","justifyContent","flexDirection","buttonContainer","boxSizing","padding","icon","withDescription","wrapper","marginTop","NumberFormatCustom","props","inputRef","onChange","other","values","target","name","value","BillsScreen","navigationAtom","data","setAccount","isDisabled","account","bankMoney","bills","handleDeposit","fetch","method","body","JSON","stringify","amount","prevState","isAsyncRequesting","Intl","style","currency","format"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport { \r\n  Typography,\r\n  TextField,\r\n  withStyles\r\n} from '@material-ui/core';\r\nimport NumberFormat from 'react-number-format';\r\nimport { useRecoilState } from 'recoil';\r\nimport * as atoms from '../../navigation/atoms';\r\nimport SubmitButtonWithSelector from '../../components/SubmitButtonWithSelector';\r\n\r\nconst styles = {\r\n  container: {\r\n    width: '100%',\r\n    height: '40vh',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    flexDirection: 'column'\r\n  } as React.CSSProperties,\r\n\r\n  buttonContainer: {\r\n    width: '100%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    flexDirection: 'column',\r\n    boxSizing: 'border-box',\r\n    padding: '1vh'\r\n  } as React.CSSProperties,\r\n\r\n  icon: {\r\n    width: '3vh',\r\n    height: '3vh'\r\n  } as React.CSSProperties,\r\n\r\n  withDescription: {\r\n    display: 'flex',\r\n    alignItems: 'flex-start',\r\n    justifyContent: 'flex-start',\r\n    flexDirection: 'column'\r\n  } as React.CSSProperties,\r\n\r\n  wrapper: {\r\n    marginTop: '1vh',\r\n    width: '30vw'\r\n  } as React.CSSProperties\r\n}\r\n\r\ninterface NumberFormatCustomProps {\r\n  inputRef: (instance: NumberFormat | null) => void;\r\n  onChange: (event: { target: { name: string; value: string } }) => void;\r\n  name: string;\r\n}\r\n\r\nfunction NumberFormatCustom(props: NumberFormatCustomProps) {\r\n  const {inputRef, onChange, ...other} = props;\r\n\r\n  return (\r\n    <NumberFormat\r\n      {...other}\r\n      getInputRef={inputRef}\r\n      onValueChange={(values) => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      thousandSeparator\r\n      isNumericString\r\n      prefix=\"$\"\r\n    />\r\n  );\r\n}\r\n\r\nconst BillsScreen = () => {\r\n  const [data, setAccount] = useRecoilState(atoms.navigationAtom);\r\n  const isDisabled = data.account.bankMoney < data.account.bills;\r\n\r\n  const handleDeposit = () => {\r\n    fetch(`http://drip_bank/PayBills`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        amount: data.account.bills\r\n      })\r\n    });\r\n    \r\n    setAccount(prevState => ({ \r\n      ...prevState,\r\n      account: {\r\n        ...prevState.account, \r\n        ...{\r\n          bills: 0,\r\n          bankMoney: data.account.bankMoney - data.account.bills\r\n        }\r\n      },\r\n      isAsyncRequesting: true\r\n    }));\r\n  }\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.buttonContainer}>\r\n        <div style={styles.withDescription}>\r\n          <Typography \r\n            variant='subtitle2' \r\n            component='div'>\r\n            Deseja mesmo pagar suas multas?\r\n          </Typography>\r\n\r\n          <div style={styles.withDescription}>\r\n            <Typography \r\n              variant='body2' \r\n              component='div'>\r\n              Todas as multas pendentes somam\r\n            </Typography>\r\n\r\n            <Typography \r\n              variant='subtitle1' \r\n              component='div'>\r\n              {new Intl.NumberFormat('en-US', { \r\n                style: 'currency', \r\n                currency: 'USD'\r\n              }).format(data.account.bills)}\r\n            </Typography>\r\n          </div>\r\n        </div>\r\n      </div>  \r\n\r\n      <div style={styles.wrapper}>\r\n        <SubmitButtonWithSelector\r\n            label='Pagar ➝'\r\n            isDisabled={isDisabled}\r\n            isAsyncRequesting={data.isAsyncRequesting}\r\n            onClick={handleDeposit}\r\n            fullWidth={true} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BillsScreen;"]},"metadata":{},"sourceType":"module"}