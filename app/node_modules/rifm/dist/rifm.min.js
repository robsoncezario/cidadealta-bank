!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).Rifm={},e.React)}(this,(function(e,t){"use strict";var n=function(e){var n=t.useReducer((function(e){return e+1}),0)[1],r=t.useRef(null),u=e.replace,c=e.append,o=u?u(e.format(e.value)):e.format(e.value),a=t.useRef(!1);return t.useLayoutEffect((function(){if(null!=r.current){var t=r.current,a=t[0],f=t[1],i=t[2],l=t[3],s=t[4];r.current=null;var d=l&&s,v=function(t){return(t.match(e.accept||/\d/g)||[]).join("")},m=v(a.substr(0,f.selectionStart)),p=function(e){for(var t=0,n=0,r=0;r!==m.length;++r){var u=e.indexOf(m[r],t)+1,c=v(e).indexOf(m[r],n)+1;c-n>1&&(u=t,c=n),n=Math.max(c,n),t=Math.max(t,u)}return t};if(!0===e.mask&&i&&!s){var h=p(a),g=v(a.substr(h))[0];h=a.indexOf(g,h),a=""+a.substr(0,h)+a.substr(h+1)}var y=e.format(a);null==c||f.selectionStart!==a.length||s||(i?y=c(y):""===v(y.slice(-1))&&(y=y.slice(0,-1)));var x=u?u(y):y;return o===x?n():e.onChange(x),function(){var t=p(y);if(null!=e.mask&&(i||l&&!d))for(;y[t]&&""===v(y[t]);)t+=1;f.selectionStart=f.selectionEnd=t+(d?1:0)}}})),t.useEffect((function(){var e=function(e){"Delete"===e.code&&(a.current=!0)},t=function(e){"Delete"===e.code&&(a.current=!1)};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),{value:null!=r.current?r.current[0]:o,onChange:function(t){var u=t.target.value;r.current=[u,t.target,u.length>o.length,a.current,o===e.format(u)],n()}}};e.Rifm=function(e){var t=n(e);return e.children(t)},e.useRifm=n,Object.defineProperty(e,"__esModule",{value:!0})}));
