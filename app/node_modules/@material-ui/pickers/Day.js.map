{"version":3,"file":"Day.js","sources":["../src/views/Calendar/Day.tsx"],"sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport ButtonBase, { ButtonBaseProps } from '@material-ui/core/ButtonBase';\nimport { ExtendMui } from '../../typings/helpers';\nimport { onSpaceOrEnter } from '../../_helpers/utils';\nimport { useUtils } from '../../_shared/hooks/useUtils';\nimport { MaterialUiPickersDate } from '../../typings/date';\nimport { makeStyles, fade } from '@material-ui/core/styles';\nimport { DAY_SIZE, DAY_MARGIN } from '../../constants/dimensions';\nimport { FORCE_FINISH_PICKER } from '../../_shared/hooks/usePickerState';\n\nexport const useStyles = makeStyles(\n  theme => ({\n    day: {\n      width: DAY_SIZE,\n      height: DAY_SIZE,\n      borderRadius: '50%',\n      padding: 0,\n      // background required here to prevent collides with the other days when animating with transition group\n      backgroundColor: theme.palette.background.paper,\n      color: theme.palette.text.primary,\n      fontSize: theme.typography.caption.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      '&:hover': {\n        backgroundColor: fade(theme.palette.action.active, theme.palette.action.hoverOpacity),\n      },\n      '&:focus': {\n        backgroundColor: fade(theme.palette.action.active, theme.palette.action.hoverOpacity),\n        '&$daySelected': {\n          willChange: 'background-color',\n          backgroundColor: theme.palette.primary.dark,\n        },\n      },\n    },\n    dayWithMargin: {\n      margin: `0px ${DAY_MARGIN}px`,\n    },\n    dayOutsideMonth: {\n      color: theme.palette.text.hint,\n    },\n    hiddenDaySpacingFiller: {\n      visibility: 'hidden',\n    },\n    today: {\n      '&:not($daySelected)': {\n        border: `1px solid ${theme.palette.text.hint}`,\n      },\n    },\n    daySelected: {\n      color: theme.palette.primary.contrastText,\n      backgroundColor: theme.palette.primary.main,\n      fontWeight: theme.typography.fontWeightMedium,\n      transition: theme.transitions.create('background-color', {\n        duration: theme.transitions.duration.short,\n      }),\n      '&:hover': {\n        willChange: 'background-color',\n        backgroundColor: theme.palette.primary.dark,\n      },\n    },\n    dayDisabled: {\n      pointerEvents: 'none',\n      color: theme.palette.text.hint,\n    },\n    dayLabel: {\n      // need for overrides\n    },\n  }),\n  { name: 'MuiPickersDay' }\n);\n\nexport interface DayProps extends ExtendMui<ButtonBaseProps> {\n  /** The date to show */\n  day: MaterialUiPickersDate;\n  /** Is focused by keyboard navigation */\n  focused?: boolean;\n  /** Can be focused by tabbing in */\n  focusable?: boolean;\n  /** Is day in current month */\n  inCurrentMonth: boolean;\n  /** Is switching month animation going on right now */\n  isAnimating?: boolean;\n  /** Is today? */\n  today?: boolean;\n  /** Disabled? */\n  disabled?: boolean;\n  /** Selected? */\n  selected?: boolean;\n  /** Is keyboard control and focus management enabled */\n  allowKeyboardControl?: boolean;\n  /** Disable margin between days, useful for displaying range of days */\n  disableMargin?: boolean;\n  /**\n   * Display disabled dates outside the current month\n   * @default false\n   */\n  showDaysOutsideCurrentMonth?: boolean;\n  /** Disable highlighting today date with a circle\n   * @default false\n   */\n  disableHighlightToday?: boolean;\n  onDayFocus: (day: MaterialUiPickersDate) => void;\n  onDaySelect: (day: MaterialUiPickersDate, isFinish: boolean | symbol) => void;\n}\n\nconst PureDay: React.FC<DayProps> = ({\n  className,\n  day,\n  disabled,\n  hidden,\n  inCurrentMonth: isInCurrentMonth,\n  today: isToday,\n  selected,\n  focused = false,\n  focusable = false,\n  isAnimating,\n  onDayFocus,\n  onDaySelect,\n  onFocus,\n  onClick,\n  onKeyDown,\n  disableMargin = false,\n  allowKeyboardControl,\n  disableHighlightToday = false,\n  showDaysOutsideCurrentMonth = false,\n  ...other\n}) => {\n  const ref = React.useRef<HTMLButtonElement>(null);\n  const utils = useUtils();\n  const classes = useStyles();\n\n  React.useEffect(() => {\n    if (\n      focused &&\n      !disabled &&\n      !isAnimating &&\n      isInCurrentMonth &&\n      ref.current &&\n      allowKeyboardControl\n    ) {\n      ref.current.focus();\n    }\n  }, [allowKeyboardControl, disabled, focused, isAnimating, isInCurrentMonth]);\n\n  const handleFocus = (e: React.FocusEvent<HTMLButtonElement>) => {\n    if (!focused) {\n      onDayFocus(day);\n    }\n\n    if (onFocus) {\n      onFocus(e);\n    }\n  };\n\n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    if (!disabled) {\n      onDaySelect(day, true);\n    }\n\n    if (onClick) {\n      onClick(e);\n    }\n  };\n\n  const handleKeyDown = onSpaceOrEnter(() => {\n    if (!disabled) {\n      onDaySelect(day, FORCE_FINISH_PICKER);\n    }\n  }, onKeyDown);\n\n  const dayClassName = clsx(\n    classes.day,\n    {\n      [classes.daySelected]: selected,\n      [classes.dayDisabled]: disabled,\n      [classes.dayWithMargin]: !disableMargin,\n      [classes.today]: !disableHighlightToday && isToday,\n      [classes.dayOutsideMonth]: !isInCurrentMonth && showDaysOutsideCurrentMonth,\n    },\n    className\n  );\n\n  if (!isInCurrentMonth && !showDaysOutsideCurrentMonth) {\n    // Do not render button and not attach any listeners for empty days\n    return <div aria-hidden className={clsx(dayClassName, classes.hiddenDaySpacingFiller)} />;\n  }\n\n  return (\n    <ButtonBase\n      ref={ref}\n      centerRipple\n      data-mui-test=\"day\"\n      aria-label={utils.format(day, 'fullDate')}\n      tabIndex={focused || focusable ? 0 : -1}\n      className={dayClassName}\n      {...other}\n      onFocus={handleFocus}\n      onKeyDown={handleKeyDown}\n      onClick={handleClick}\n    >\n      <span className={classes.dayLabel}>{utils.format(day, 'dayOfMonth')}</span>\n    </ButtonBase>\n  );\n};\n\nexport const areDayPropsEqual = (prevProps: DayProps, nextProps: DayProps) => {\n  return (\n    prevProps.focused === nextProps.focused &&\n    prevProps.focusable === nextProps.focusable &&\n    prevProps.isAnimating === nextProps.isAnimating &&\n    prevProps.today === nextProps.today &&\n    prevProps.disabled === nextProps.disabled &&\n    prevProps.selected === nextProps.selected &&\n    prevProps.allowKeyboardControl === nextProps.allowKeyboardControl &&\n    prevProps.disableMargin === nextProps.disableMargin &&\n    prevProps.showDaysOutsideCurrentMonth === nextProps.showDaysOutsideCurrentMonth &&\n    prevProps.disableHighlightToday === nextProps.disableHighlightToday &&\n    prevProps.className === nextProps.className &&\n    prevProps.onDayFocus === nextProps.onDayFocus &&\n    prevProps.onDaySelect === nextProps.onDaySelect\n  );\n};\n\nexport const Day = React.memo(PureDay, areDayPropsEqual);\n\nPureDay.displayName = 'Day';\n\nPureDay.propTypes = {\n  today: PropTypes.bool,\n  disabled: PropTypes.bool,\n  selected: PropTypes.bool,\n};\n\nPureDay.defaultProps = {\n  disabled: false,\n  today: false,\n  selected: false,\n};\n"],"names":["useStyles","makeStyles","theme","day","width","DAY_SIZE","height","borderRadius","padding","backgroundColor","palette","background","paper","color","text","primary","fontSize","typography","caption","fontWeight","fontWeightMedium","fade","action","active","hoverOpacity","willChange","dark","dayWithMargin","margin","DAY_MARGIN","dayOutsideMonth","hint","hiddenDaySpacingFiller","visibility","today","border","daySelected","contrastText","main","transition","transitions","create","duration","dayDisabled","pointerEvents","dayLabel","name","PureDay","className","disabled","hidden","isInCurrentMonth","inCurrentMonth","isToday","selected","focused","focusable","isAnimating","onDayFocus","onDaySelect","onFocus","onClick","onKeyDown","disableMargin","allowKeyboardControl","disableHighlightToday","showDaysOutsideCurrentMonth","other","ref","React","utils","useUtils","classes","current","focus","handleFocus","e","handleClick","handleKeyDown","onSpaceOrEnter","FORCE_FINISH_PICKER","dayClassName","clsx","React.createElement","format","areDayPropsEqual","prevProps","nextProps","Day","displayName","propTypes","PropTypes","defaultProps"],"mappings":"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"}